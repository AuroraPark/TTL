오늘은 jsp 표현언어 (EL)보고
jstl 라이브러리 사용법 봤다

## 오늘의 SQL

### 1. OUTER JOIN

> **사용법 :** WHERE e.id **(+)** = c.sales_rep_id  -- LEFT OUTER JOIN

 - LEFT OUTER, RIGHT OUTER, FULL OUTER
 - 데이터가 부족한 쪽으로 '(+)'를 붙이면 된다.

```
> 담당 직원이 배정되지 않은 고객을 찾는 경우
SELECT e.name 사원명, e.id, c.name 고객명 
FROM s_emp e, s_customer c
WHERE e.id (+) = c.sales_rep_id  -- LEFT OUTER JOIN
--WHERE e.id = c.sales_rep_id (+) -- RIGHT OUTER JOIN
ORDER BY 2;
```
 - LO: 담당고객이 없는 직원
 - RO: 담당직원이 없는 고객

### 2. SELF JOIN

>**사용법 :** FROM **s_emp w, s_emp m**
WHERE **w.manager_id = m.id**;


- 같은 테이블에서 JOIN
- 이름은 다르게 지정해야 한다

```
> 직원 테이블에서 상사에 대한 정보를 
> 같은 테이블에서 가져와야 하는 경우
SELECT  w.id 사번, w.name 사원명, 
        m.id 부서장사번, m.name 부서장명
FROM s_emp w, s_emp m
WHERE w.manager_id = m.id;
```

#### Q. 직원 중에 '김정미'와 같은 직책(title)을 가지는 사원의 이름과 직책, 급여, 부서번호를 나타내시오(SELF JOIN이용)
```
SELECT s.name, s.title, s.salary, s.dept_id -- 이름(name),직책(title), 급여(salary), 부서번호(dept_id)
FROM s_emp k, s_emp s
WHERE k.title=s.title -- 직책이 같은
and k.name='김정미'; -- 이름이 '김정미'인 사람의 직책(title)과 같을 경우
--and k.name<>'김정미'; -- 이름이 '김정미'인 사람의 직책(title)과 다를경우
```
 
 - 이름이 '김정미'인 사람의 직책(title)과 같을 경우

> and k.name='김정미'; 

  - 이름이 '김정미'인 사람의 직책(title)과 다를경우

> and k.name<>'김정미';


#### Q. 관리자별(manager_id)별(이름)로 담당하고 있는 직원의 수(count())를 나타내시오.

- 일단 전체 데이터를 확인해본다.
```
-- 관리자 이름, 담당 직원의 수
SELECT manager_id, count(*) FROM s_emp
group by manager_id;
```

- 그룹할 때 두 테이블 전부 그룹 기준을 줘야한다
```
SELECT e2.name, e1.manager_id, count(*) FROM s_emp e1, s_emp e2
where e1.manager_id = e2.id
group by e2.name,e1.manager_id
order by e1.manager_id;
```



### 3. SET

- UNION ALL(전체) / UNION(합) / INTERSECT(교) / MINUS(차) 
- 테이블 연결!
- EX>
```
SELECT 1,1,1,0,0,0 FROM DUAL
UNION ALL
SELECT 0,0,0,1,1,1 FROM DUAL;
```


<!--stackedit_data:
eyJoaXN0b3J5IjpbMTk0NTE1NTQ0MiwtMTMxNjU5OTcwMCwxNz
c4NjMwMzQ2LC0xNzU2Njg3NzY2LC0xNzY4MDcwOTYwLC0xMDA5
MjEyMzc5LC0xNzc5Mzc1NTRdfQ==
-->